<!-- app/views/shared/_nav.html.erb -->
<header class="border-b bg-[#CC0000] text-white">
  <div
    class="mx-auto max-w-6xl px-4 md:px-6 lg:px-8
           h-16
           grid grid-cols-3 items-center"
    data-controller="modal">

    <!-- タイトル：base=中央 / lg=左 -->
    <%= link_to root_path,
          class: "col-start-2 justify-self-center
                  lg:col-start-1 lg:justify-self-start
                  inline-flex items-center gap-2 h-full
                  font-semibold text-lg lg:text-xl whitespace-nowrap" do %>
      <%= heroicon "academic-cap", variant: :outline, options: { class: "w-6 h-6 text-white" } %>
      <span class="text-white">Rails Learning Test</span>
    <% end %>

    <!-- 右側クラスター：配置は従来どおり -->
    <div class="col-start-3 justify-self-end flex items-center gap-0 h-full">

      <!-- グローバルメニュー：LG以上のみ／背景同化・枠なし・ホバーで色替え -->
      <nav class="hidden lg:flex items-center gap-0 text-sm whitespace-nowrap h-full">
        <%= link_to editor_path,
          class: "inline-flex h-full px-4 hover:bg-[#BB0000] active:bg-[#AA0000] text-white" do %>
          <span class="flex flex-col items-center justify-center leading-4">
            <span class="mt-1 text-sm font-medium whitespace-nowrap">Code Editor</span>
            <span class="text-[10px] opacity-90 whitespace-nowrap">- エディタ -</span>
          </span>
        <% end %>

        <%= link_to books_path,
          class: "inline-flex h-full px-4 hover:bg-[#BB0000] active:bg-[#AA0000] text-white" do %>
          <span class="flex flex-col items-center justify-center leading-4">
            <span class="mt-1 text-sm font-medium whitespace-nowrap">Rails Books</span>
            <span class="text-[10px] opacity-90 whitespace-nowrap">- テキスト -</span>
          </span>
        <% end %>

        <%= link_to quizzes_path,
          class: "inline-flex h-full px-4 hover:bg-[#BB0000] active:bg-[#AA0000] text-white" do %>
          <span class="flex flex-col items-center justify-center leading-4">
            <span class="mt-1 text-sm font-medium whitespace-nowrap">Quizzes</span>
            <span class="text-[10px] opacity-90 whitespace-nowrap">- 教本クイズ -</span>
          </span>
        <% end %>

        <%= link_to pre_codes_path,
          class: "inline-flex h-full px-4 hover:bg-[#BB0000] active:bg-[#AA0000] text-white" do %>
          <span class="flex flex-col items-center justify-center leading-4">
            <span class="mt-1 text-sm font-medium whitespace-nowrap">PreCode</span>
            <span class="text-[10px] opacity-90 whitespace-nowrap">- 初期データ登録 -</span>
          </span>
        <% end %>

        <%= link_to code_libraries_path,
          class: "inline-flex h-full px-4 hover:bg-[#BB0000] active:bg-[#AA0000] text-white" do %>
          <span class="flex flex-col items-center justify-center leading-4">
            <span class="mt-1 text-sm font-medium whitespace-nowrap">Code Library</span>
            <span class="text-[10px] opacity-90 whitespace-nowrap">- 初期データ閲覧 -</span>
          </span>
        <% end %>

        <% unless logged_in? %>
          <%= link_to new_session_path,
            class: "inline-flex h-full px-4 hover:bg-[#BB0000] active:bg-[#AA0000] text-white" do %>
            <span class="flex flex-col items-center justify-center leading-4">
              <span class="mt-1 text-sm font-medium whitespace-nowrap">Login</span>
              <span class="text-[10px] opacity-90 whitespace-nowrap">- ログイン -</span>
            </span>
          <% end %>
        <% end %>
      </nav>

      <!-- ハンバーガー：常時表示（デザインのみ変更） -->
      <button
        class="inline-flex items-center justify-center h-full px-3 rounded-none hover:bg-[#BB0000] active:bg-[#AA0000]"
        data-action="click->modal#open" aria-label="メニューを開く">
        <%= heroicon "bars-3", options: { class: "w-6 h-6" } %>
      </button>
    </div>

    <!-- モーダル（同スコープ内で描画） -->
    <%= render "shared/modal_panel" %>
  </div>
</header>
