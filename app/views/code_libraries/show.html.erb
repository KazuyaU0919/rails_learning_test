<!-- app/views/code_libraries/show.html.erb -->
<% breadcrumb :code_libraries %>
<% breadcrumb :code_library, @pre_code %>
<%= render "shared/breadcrumbs" %>

<% content_for :title, @pre_code.title %>

<div class="mx-auto w-full max-w-2xl space-y-8">
  <!-- Title -->
  <section>
    <h2 class="text-xs font-semibold tracking-wider text-slate-500 uppercase">タイトル</h2>
    <div class="mt-1 rounded-xl ring-1 ring-slate-300 bg-white px-4 py-3">
      <p class="text-xl font-semibold"><%= @pre_code.title %></p>
    </div>
  </section>

  <!-- Description -->
  <section>
    <h2 class="text-xs font-semibold tracking-wider text-slate-500 uppercase">説明</h2>
    <div class="mt-1 rounded-xl ring-1 ring-slate-300 bg-white px-4 py-3">
      <%= simple_format @pre_code.description %>
    </div>
  </section>

  <!-- Code -->
  <section>
    <h2 class="text-xs font-semibold tracking-wider text-slate-500 uppercase">コード</h2>
    <pre class="mt-1 rounded-xl bg-slate-900 text-white p-4 overflow-x-auto"><code><%= @pre_code.body %></code></pre>
  </section>

  <!-- アクション（いいね／使った） -->
  <section class="mt-6">
    <div class="flex gap-2">
      <% current_like = logged_in? ? @pre_code.likes.find_by(user_id: current_user.id) : nil %>
      <%= render "actions", pre_code: @pre_code, current_like: current_like %>
    </div>
  </section>
</div>
